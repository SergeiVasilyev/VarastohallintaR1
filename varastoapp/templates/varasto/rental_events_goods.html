{% extends "varasto/base_main.html" %}
{% load i18n %}

{% load static %}

{% block stylesheet %}
<link rel="stylesheet" type="text/css" href="{% static 'varasto/rental_events_goods.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'varasto/base_main.css' %}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
{% endblock %}

{% block title %}Vuokratapahtumat{% endblock %}
{% block path %}Vuokratapahtumat{% endblock %}
{% block page %}Vuokratapahtumat{% endblock %}

{% block script %}
<script type="text/javascript">
$(document).ready(function() {
    const setRentalView = (page) => {
        $.ajax({
            type: 'POST',
            url: '/set_rental_event_view/',
            data: {
                'csrfmiddlewaretoken': '{{ csrf_token }}',
                'page': page,
            },
            success: (response)=> {
                // console.log(response)
            }
        })
    }

    $('#rental_view_switch').click(function(){
        setRentalView('rental_events')
    })

})
</script>
{% endblock %}

{% block main_content %}
    <div class="filter_panel">
        <div class="sorting">
            <div class="btn-group"> <!--  bi-sort-alpha-up-alt -->
                <button type="button" class="btn btn-secondary bi-sort-alpha-down">
                </button>
            </div>
            <div class="btn-group">
                <button type="button" class="btn btn-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                    Alkamispäivä
                </button>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">Alkamispäivä</a></li>
                    <li><a class="dropdown-item" href="#">Päättymispäivä</a></li>
                    <li><a class="dropdown-item" href="#">Status</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="#">Nimi</a></li>
                    <li><a class="dropdown-item" href="#">Tavara</a></li>
                </ul>
            </div>
            <div class="btn-group"> <!--  bi-sort-alpha-up-alt -->
                <a href="{% url 'rental_events' %}" class="nodecor" id="rental_view_switch">
                    <button type="button" class="btn btn-secondary">
                        Vuokrajat ensin
                    </button>
                </a>
            </div>
        </div>

        <div class="date_selection">
            <button type="button" class="btn btn-secondary">
                01.02.2022
            </button>
            <span class="ms-2 me-2"> - </span>
            <button type="button" class="btn btn-secondary">
                25.02.2022
            </button>
        </div>

        <div class="checkbox_filters px-3">
            <div class="form-check me-4">
                <input class="form-check-input" type="checkbox" value="" id="chk-01">
                <label class="form-check-label" for="chk-01">Lainassa</label>
            </div>
            <div class="form-check me-4">
                <input class="form-check-input" type="checkbox" value="" id="chk-02">
                <label class="form-check-label" for="chk-02">Opiskelijat</label>
            </div>
            <div class="form-check me-4">
                <input class="form-check-input" type="checkbox" value="" id="chk-03">
                <label class="form-check-label" for="chk-03">Opettajat</label>
            </div>
            <div class="form-check me-4">
                <input class="form-check-input" type="checkbox" value="" id="chk-04">
                <label class="form-check-label" for="chk-04">Erääntynyt</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="chk-05">
                <label class="form-check-label" for="chk-05">laajenna luetteloa</label>
            </div>
        </div>
    </div>

    <div class="column_names">
        <div class="column"><span>Tavara</span></div>
        <div class="column"><span>Lainaaja</span></div>
        <div class="column"><span>STATUS</span></div>
        <div class="column"><span>Alkamispäivä</span></div>
        <div class="column"><span>Arvioitu palautuspäivä</span></div>
        <div class="column"><span>Kommentti</span></div>
        <div class="column"><span></span></div>
    </div>

    <div class="list">
        {% for event in events %}
            <div class="list__item brd_top" userid="{{event.item.id}}">
                <div class="list__item_photo">
                    <!-- <div><img src="{% static 'varasto/pics/people/janko-ferlic.jpg' %}" alt="janko-ferlic.jpg"></div> -->
                    <div><a href="{% url 'product' event.item_id %}"><img src="{% static event.item.picture %}" alt="{{event.item.picture}}"></a></div>
                </div>
                <div class="list__item_student">
                    <span><a href="{% url 'product' event.item_id %}">{{event.item.brand|default_if_none:""}} {{event.item.model|default_if_none:""}}</a></span>
                    <span><a href="{% url 'product' event.item_id %}">{{event.item.item_name}}</a></span>
                </div>
                <div class="list__item_group">
                    <span><a href="{% url 'renter' event.renter_id %}">{{event.renter.first_name}} {{event.renter.last_name}}</a></span>
                    <span><a href="{% url 'renter' event.renter_id %}">{{event.renter.email|default_if_none:""}}</a></span>
                </div>
                <div>
                    {% if not event.returned_date and event.is_past_due %}
                        <div class="list__rented_item_status">
                            <div class="status_green"><span>Lainassa</span></div>
                        </div>
                        {% else %}{% if not event.returned_date and not event.is_past_due %}
                        <div class="list__rented_item_status">
                            <div class="status_red"><span>Erääntynyt</span></div>
                        </div>
                        {% else %}{% if event.returned_date %}
                        <div class="list__rented_item_status">
                            <div class="status_gray"><span>Palautettu</span></div>
                        </div>
                        {% endif %}
                        {% endif %}
                    {% endif %}
                </div>
                <div class="list__item_st-time">
                    <span>{{event.start_date|date:'d.m.Y'}}</span>
                </div>
                <div class="list__item_etime">
                    <span>{{event.estimated_date|date:'d.m.Y'}}</span>
                </div>
                <div class="list__item_comment">
                    <span>{{event.remarks|default_if_none:""}}</span>
                </div>
            </div>
            
        {% endfor %}
    </div>




{% endblock %}